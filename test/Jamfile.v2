# Copyright (c) 2018 Emil Dotchevski
# Copyright (c) 2018 Second Spectrum, Inc.

# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

import testing ;

project
    : requirements
        <toolset>gcc:<cxxflags>"-std=c++11" <linkflags>"-pthread"
        <toolset>darwin:<cxxflags>"-std=c++11 -Wno-unused-variable -Wno-non-virtual-dtor -Wno-dangling-else"
		<toolset>msvc:<cxxflags>"-wd 4267"
		<include>../../..
    ;

run optional_test.cpp ;
run tl_slot_test.cpp ;
run diagnostic_print_test.cpp ;
run diagnostic_information_test.cpp ;
run expect_result_test.cpp ;
run expect_eh_test.cpp ;
run capture_result_test.cpp : : : <threading>multi ;
run capture_result_void_test.cpp : : : <threading>multi ;
run capture_eh_test.cpp : : : <threading>multi ;

compile hpp_capture_exception_test.cpp ;
compile hpp_capture_result_test.cpp ;
compile hpp_common_test.cpp ;
compile hpp_current_exception_diagnostic_information_test.cpp ;
compile hpp_diagnostic_information_test.cpp ;
compile hpp_expect_test.cpp ;
compile hpp_put_test.cpp ;

compile ../example/print_file_result.cpp ;
compile ../example/print_file_eh.cpp ;
compile ../example/capture_result.cpp ;
compile ../example/capture_eh.cpp ;
